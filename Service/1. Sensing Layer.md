# 📡 Module 01: Sensing Layer & Physical Data Acquisition
> **Project:** 6G-Guardian (ISAC-based Contactless Athlete Protection System)  
> **Module:** Sensing Layer (Physical Layer & Signal Processing)  
> **Version:** 1.0.0 (Deep Technical Specification)  
> **Author:** Mobile Engineering Dept. KNU

---

## 1. 서론 및 기술적 배경 (Introduction & Technical Background)

### 1.1. 개요 (Overview)
**Sensing Layer**는 6G-Guardian 시스템의 최하단 물리 계층(PHY Layer)이다. 본 모듈은 6G 통신의 핵심 패러다임인 **ISAC (Integrated Sensing and Communication)** 기술을 기반으로, 통신 파형(Waveform)을 센싱 탐지 신호로 동시에 활용한다. 이를 통해 별도의 전용 센서(LiDAR, Wearable) 없이 **Sub-millimeter(0.1mm)** 수준의 생체 역학적 데이터를 비접촉으로 획득하는 것을 목표로 한다.

### 1.2. 주파수 대역 선정 및 특성 (Frequency Band Selection)
* **Target Band:** **0.1 THz ~ 0.3 THz (Sub-THz Band)**
* **Rationale:**
    * **High Spatial Resolution:** 파장($\lambda$)이 1mm~3mm 수준으로 짧아, 근육의 미세한 텍스처와 관절의 형상을 식별하기에 최적화됨.
    * **Micro-Doppler Sensitivity:** 인체의 미세 떨림(Micro-motion)에 대해 매우 민감한 위상 변화를 유도함.
    * **Reflection Characteristics:** 인체 피부의 수분 함량에 대해 높은 반사율을 가지며, 옷(섬유)은 투과하고 피부에서 반사되는 특성이 있어 생체 계측에 유리함.

---

## 2. 물리학적 원리 및 수식적 모델링 (Physics & Mathematical Modeling)

### 2.1. 초고해상도 거리 센싱 (Ultra-High Resolution Range Sensing)
6G의 광대역폭을 활용한 FMCW(Frequency Modulated Continuous Wave) 혹은 OFDM 기반 센싱의 거리 분해능 원리이다.

* **Fundamental Formula:**
    거리 분해능 $\Delta R$은 신호의 대역폭 $B$에 의해 결정된다.
    $$\Delta R = \frac{c}{2B}$$
* **6G Specification Implementation:**
    * **Legacy (5G):** $B = 400 \text{ MHz} \rightarrow \Delta R \approx 37.5 \text{ cm}$ (신체 부위 구분 불가능)
    * **Proposed (6G):** $B \ge 15 \text{ GHz} \rightarrow \Delta R \approx 1.0 \text{ cm}$
    * **Effect:** 손가락 마디, 무릎의 슬개골(Patella) 돌출부 등 해부학적 특징점 식별 가능.

### 2.2. 위상 기반 미세 변위 추적 (Phase-based Micro-Displacement Tracking)
거리 분해능의 물리적 한계를 넘어, **위상(Phase)** 정보를 이용해 1mm 이하의 움직임을 추적한다.

* **Phase Shift Model:**
    거리 변화 $\Delta d$에 따른 수신 신호의 위상 변화 $\Delta \phi$는 다음과 같다.
    $$\Delta \phi = \frac{4\pi f_c \Delta d}{c} = \frac{4\pi \Delta d}{\lambda}$$
* **Sensitivity Analysis (at 300 GHz, $\lambda = 1 \text{ mm}$):**
    * 만약 근육이 $\Delta d = 0.05 \text{ mm}$ (50 $\mu m$) 만큼 미세하게 떨린다면?
    * $\Delta \phi = \frac{4\pi \times 0.05}{1} = 0.2\pi \approx 36^\circ$
    * **결과:** 광학 카메라로는 식별 불가능한 50마이크로미터의 떨림이, RF 신호에서는 **36도**라는 거대한 위상 변화로 관측되어 탐지가 매우 용이함.

### 2.3. Near-Field Sensing (근거리장 센싱) **[Advanced]**
6G에서는 안테나 개수가 매우 많아짐에 따라(ELAA: Extremely Large Aperture Array), 경기장 내 선수가 안테나의 **근거리장(Near-Field)** 영역에 위치하게 된다.

* **Rayleigh Distance (Fraunhofer Distance):**
    $$d_{rayleigh} = \frac{2 D^2}{\lambda}$$
    ($D$: 안테나 배열의 크기). 6G 안테나($D \approx 0.5m$)와 짧은 파장($\lambda \approx 1mm$)을 대입하면, $d_{rayleigh} \approx 500m$가 된다.
* **Spherical Wavefront Effect:**
    기존 5G까지는 평면파(Plane Wave)를 가정하여 '각도(Angle)'만 추정했으나, 6G Near-Field에서는 **구면파(Spherical Wave)** 특성을 이용해 **각도와 거리를 동시에, 그리고 점(Point) 단위로 포커싱(Beam Focusing)**하여 측정할 수 있다. 이는 측정 정밀도를 획기적으로 높이는 6G만의 특징이다.

### 2.4. THz 복소 유전율 기반 수분 민감도 모델 (THz Complex Permittivity Model)
테라헤르츠(THz) 파동은 물 분자의 회전 및 진동 에너지 준위와 일치하여 수분에 극도로 민감하게 반응합니다. 이를 이용해 비접촉으로 발한량(Sweat Rate)과 탈수 상태를 정량화합니다.

* **Complex Permittivity & Reflection:**
    피부 표면의 수분 함량에 따라 피부의 복소 유전율($\epsilon_{skin}$)이 변화하며, 이는 전파의 반사 계수($\Gamma$)를 결정짓는 핵심 변수입니다.
    $$\Gamma = \frac{\sqrt{\epsilon_{skin}} - \sqrt{\epsilon_{air}}}{\sqrt{\epsilon_{skin}} + \sqrt{\epsilon_{air}}}$$
    * $\epsilon_{skin}$: 수분 함량 함수 (수분이 많을수록 유전율 증가 $\rightarrow$ 반사율 변화).

* **Helical Antenna Effect (땀샘 공명 효과):**
    인체의 땀샘(Sweat Ducts)은 생물학적으로 **나선형(Helical) 구조**를 띠고 있습니다.
    * **Mechanism:** 이 구조는 $0.1 \sim 1 \text{ THz}$ 대역에서 마치 **초소형 나선형 안테나(Helical Antenna)**처럼 작동합니다.
    * **Sensing:** 땀샘 내부가 수분(땀)으로 채워지는 정도에 따라 공명 주파수($f_r$)가 이동(Shift)하는 특성을 이용하여, 피부 겉에 땀이 흐르기 전 단계의 **미세 발한량**을 감지합니다.

### 2.5. 수동형 THz 라디오메트리 및 생체 열 역계산 (Passive THz Radiometry)
6G 기지국 센서(TeraFET 등)가 능동적으로 전파를 쏘는 것뿐만 아니라, 인체에서 자연 방출되는 미세한 열복사 신호(Blackbody Radiation)를 수동적으로 포착하여 심부 온도를 산출합니다.

* **Rayleigh-Jeans Approximation (Planck's Law):**
    THz 대역($f < 6.15 \text{ THz}$)에서 인체의 방사 에너지 강도($I$)는 절대 온도($T$)에 선형 비례합니다.
    $$I(f, T) \approx \frac{2f^2 k_B T}{c^2}$$
    * $k_B$: 볼츠만 상수, $c$: 빛의 속도.
    * 이를 통해 센서는 별도의 접촉 없이 원거리에서 $T_s$(피부 온도)를 정밀 측정합니다.

* **Pennes’ Bio-heat Equation (심부 온도 역계산):**
    측정된 피부 온도($T_s$)와 6G 도플러 센싱으로 얻은 혈류량($\omega_b$) 데이터를 결합하여, 내부 장기의 **심부 온도($T_b$, Core Temperature)**를 역산출(Inverse Calculation)합니다.
    $$\rho c \frac{\partial T}{\partial t} = \nabla \cdot (k \nabla T) + \omega_b \rho_b c_b (T_b - T) + Q_m$$
    * $\omega_b$ (Blood Perfusion): 6G ISAC의 Micro-Doppler 센싱 값 대입.
    * $Q_m$ (Metabolic Heat): 대사 열 발생량 (운동 강도에 따라 보정).
    * $T_b$ (Core Temperature): **최종 산출 타겟** (열사병 판단의 기준 데이터).

## 3. 타겟 데이터 및 바이오마커 상세 정의 (Target Biomarkers)

### A. Skeletal Kinematics (정적/동적 골격)
* **Joint Localization:** 19개 Keypoints (Head, Neck, Shoulders, Elbows, Wrists, Hips, Knees, Ankles).
* **Angular Kinetics:** 관절의 굴곡(Flexion)/신전(Extension) 각도, 외전(Abduction)/내전(Adduction) 각도.
* **Asymmetry Index:** 좌우 다리의 체공 시간(Flight Time) 및 지지 시간(Stance Time)의 비대칭성 (부상 시 0.05초 이상의 차이 발생).

### B. Neuromuscular Tremor (신경근육 미세 떨림)
* **Physiological Tremor (생리학적 떨림):** 8~12 Hz 대역. 근육 피로 누적 시 진폭(Amplitude)이 증가.
* **Cramp Precursor (경련 전조):** 근육 수축이 지속되면서 발생하는 20 Hz 이상의 고주파수 진동 및 국소적 근육 부피 팽창(Bulging).
* **Detection Threshold:** 변위 0.1 mm 이상, 지속 시간 500 ms 이상.

### C. Vital Signs (Cardio-Pulmonary)
* **Thoracic Displacement:** 호흡에 의한 흉곽 움직임 (0.5 Hz, ~5 mm 변위).
* **Precordial Vibration:** 심장 박동에 의한 가슴 표면 미세 진동 (1~2 Hz, ~0.2 mm 변위).
* **Intermodulation Separation:** 호흡 신호와 심박 신호가 섞여 들어오므로, **VMD (Variational Mode Decomposition)** 등의 알고리즘으로 분리 필요.

---

## 4. 하드웨어 인프라 구조 (Infrastructure Architecture)

### 4.1. Cell-Free Massive MIMO System
* **Distributed Access Points (D-APs):**
    * 경기장 펜스, 천장, 지면에 $N \approx 256$개의 소형 서브-테라헤르츠 AP 분산 배치.
    * **Coherent Joint Transmission:** 모든 AP가 위상 동기화(Phase Synchronization)되어 하나의 거대한 안테나처럼 작동.
* **Benefits:**
    * **Macro-Diversity:** 선수가 몸을 돌려도(Self-occlusion), 등 뒤나 측면에 있는 AP가 신호를 수신.
    * **Shadowing Mitigation:** 특정 경로가 차단되어도 다른 경로로 보완 가능.

### 4.2. RIS (Reconfigurable Intelligent Surface)
* **Device Structure:** 수천 개의 메타물질 소자(Unit Cell)로 구성된 패시브 반사판.
* **Function:** PIN 다이오드나 바랙터(Varactor)를 제어하여 입사된 전파의 반사각을 실시간으로 조절.
* **Role:** AP 설치가 어려운 코너나 바닥면의 사각지대 해소 (Virtual Line-of-Sight 확보).

---

## 5. 신호 처리 파이프라인 (Signal Processing Pipeline)

Raw Data가 AI 모델에 입력되기 전까지의 전처리 과정 상세 (Step-by-Step).

### Step 1: Pre-processing & Calibration
* **IQ Imbalance Correction:** 하드웨어 불완전성으로 인한 I/Q 채널 간 위상/크기 오차 보정.
* **CFO (Carrier Frequency Offset) Compensation:** 송수신 간 주파수 동기화 오차 제거.

### Step 2: Clutter Removal (정적 클러터 제거)
경기장 바닥, 골대, 관중석 등 움직이지 않는 배경 신호를 제거하여 선수의 신호만 남김.
* **Algorithm:** **SVD (Singular Value Decomposition)** 기반 필터링.
    * CSI 행렬을 분해했을 때, 가장 큰 특이값(Singular Value)을 가지는 성분이 주로 정적 배경이므로 이를 0으로 마스킹하여 제거.

### Step 3: 4D Tensor Construction (텐서 생성)
AI 모델 학습을 위한 다차원 데이터 큐브 생성.
* **Dimensions:** Range $\times$ Doppler $\times$ Angle (Azimuth/Elevation) $\times$ Time
* **Processing:**
    1.  **Range-FFT:** 거리 프로파일 추출.
    2.  **Doppler-FFT:** 속도 성분 추출 (Micro-Doppler).
    3.  **Beamforming (Music/ESPRIT):** 도래각(AoA) 정밀 추정.

### Step 4: Semantic Feature Extraction
* **STFT (Short-Time Fourier Transform):** 시간에 따른 주파수 변화를 이미지화하여 **Micro-Doppler Spectrogram** 생성. 근육 떨림 패턴이 여기서 시각화됨.

---

## 6. 예상 성능 및 한계 극복 (Performance & Mitigation)

### 6.1. Performance Metrics
| Parameter | 5G System | **6G-Guardian System** | Note |
| :--- | :--- | :--- | :--- |
| **Operating Freq** | 28 GHz (mmWave) | **140 GHz ~ 300 GHz (Sub-THz)** | 파장 1/10 축소 |
| **Bandwidth** | 400 MHz | **10 GHz ~ 40 GHz** | 분해능 25배 이상 향상 |
| **Range Resolution** | ~37.5 cm | **~0.75 cm (Theoretical)** | 근육 형상 식별 가능 |
| **Doppler Sensitivity** | ~1 cm/s | **~0.1 mm/s** | 미세 떨림 감지 가능 |
| **Latency** | 10 ms | **< 0.1 ms** | ISAC Physical Layer 처리 |

### 6.2. Technical Challenges & Solutions
* **Path Loss (경로 손실):** THz 대역은 공기 중 감쇄가 심함.
    * $\rightarrow$ **Solution:** Ultra-Massive MIMO를 통한 고이득 빔포밍(High-Gain Beamforming)으로 전력 집중.
* **Ghost Targets (유령 허상):** 다중 반사(Multipath)로 인해 없는 위치에 선수가 있는 것처럼 보임.
    * $\rightarrow$ **Solution:** 다중 AP의 데이터를 융합(Fusion)할 때 기하학적 검증(Geometric Consistency Check)을 통해 허상 제거.

---

## 7. 핵심 참고 문헌 (Key References)

본 기술 명세는 다음의 최신 연구 동향 및 표준화 문서를 기반으로 한다.

1.  **3GPP TR 38.801 / Release 19 Study Item on ISAC:** 5G-Advanced 및 6G에서의 센싱 요구사항 정의.
2.  **"Holographic MIMO Surfaces for 6G Wireless Networks" (IEEE Comm. Surveys, 2020):** Near-Field Sensing 및 구면파 활용 이론.
3.  **"Terahertz Band Communication and Sensing: Integrated System Design" (IEEE JSAC):** THz 대역에서의 생체 신호 반사 특성 연구.
4.  **Nyquist, H. & Shannon, C.:** 신호 처리의 기본이 되는 샘플링 이론 및 채널 용량 이론 (기초 원리).

---
*Copyright © 2026 Mobile Engineering Dept. KNU. All Rights Reserved.*
